// const dotenv = require('dotenv');

// dotenv.config({ path: `${__dirname}/.env` });
const express = require('express');
const serveStatic = require('serve-static');
const path = require('path');
const history = require('connect-history-api-fallback');
const compression = require('compression');
const jsonData = require('./data.json');

const app = express();

const port = process.env.PORT || 8080;

app.get('/chart/:id', (req, res) => {
  setTimeout(() => {
    res.setHeader('Content-Type', 'application/json');
    res.send(jsonData[req.params.id]);
  }, 500);
});

app.use(compression());
app.use(history());

app.use('/', serveStatic(path.join(`${__dirname}/dist/`)));

app.listen(port);
